{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "nl.dj.aps",
  "version": "1.3.13",
  "compatibility": ">=5.0.0",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "APsystems Solar Panels"
  },
  "brandColor": "#FD8103",
  "description": {
    "en": "Read power and energy from APsystems Solar Panels",
    "nl": "Vermogen en productie van APsystems zonnepanelen uitlezen",
    "fr": "Lire la puissance et l'énergie des panneaux solaires APsystems",
    "de": "Lesen Sie Leistung und Energie von APsystems-Solarmodulen"
  },
  "category": "energy",
  "permissions": [],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png"
  },
  "author": {
    "name": "Dick Juffermans",
    "email": "dick.juffermans@gmail.com"
  },
  "tags": {
    "en": [
      "Solar",
      "Solar panel",
      "Solarpanel",
      "Energy",
      "AP systems",
      "APsystems",
      "AP Systems",
      "APSystems",
      "ECU"
    ],
    "nl": [
      "Zonne energie",
      "Zonnepanelen",
      "Zonnepaneel",
      "AP systems",
      "APsystems",
      "AP Systems",
      "APSystems",
      "ECU"
    ],
    "fr": [
      "Énergie solaire ",
      "Panneaux solaires",
      "Panneau solaire",
      "Systèmes AP",
      "Systemes AP",
      "APSystems",
      "ECU"
    ],
    "de": [
      "Solarenergie",
      "Solarmodule",
      "Solarmodul",
      "AP-Systeme",
      "AP-Systeme",
      "AP-Systeme",
      "AP-Systeme",
      "ECU"
    ]
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": "@DickJuffermans"
      }
    }
  },
  "flows": [
    "ECU_error",
    "ECU_power_changed"
  ],
  "flow": {
    "triggers": [
      {
        "id": "ECU_error",
        "title": {
          "en": "Error in retreiving ECU-data",
          "nl": "Fout bij het ophalen van ECU-gegevens",
          "de": "Fehler beim Abrufen der ECU-Daten",
          "fr": "Erreur lors de la récupération des données ECU"
        },
        "hint": {
          "en": "Let's you know when the ECU is not communicating",
          "nl": "Laat je weten dat de ECU niet communiceert",
          "de": "Informiert Sie darüber, dass die ECU nicht kommuniziert",
          "fr": "Vous permet de savoir que l'ECU ne communique pas"
        },
        "tokens": [
          {
            "type": "string",
            "name": "error_message",
            "title": {
              "en": "Error message",
              "de": "Fehlermeldung",
              "fr": "Message d'erreur",
              "nl": "Foutmelding"
            },
            "example": {
              "en": "No connection to ECU",
              "fr": "Aucune connexion à l'ECU",
              "de": "Keine Verbindung zur ECU",
              "nl": "Geen verbinding met ECU"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=ecu"
          }
        ]
      },
      {
        "id": "ECU_power_changed",
        "title": {
          "en": "Power has changed",
          "nl": "Vermogen is veranderd",
          "de": "Leistung hat sich geändert",
          "fr": "La puissance a changé"
        },
        "hint": {
          "en": "Triggers when the ECU power changes",
          "nl": "Wordt geactiveerd als het vermogen van de ECU verandert",
          "de": "Wird ausgelöst, wenn sich die ECU-Leistung ändert",
          "fr": "Déclenché lorsque la puissance de l'ECU change"
        },
        "tokens": [
          {
            "type": "number",
            "name": "new_power",
            "title": {
              "en": "New power",
              "de": "Neue Leistung",
              "fr": "Nouvelle puissance",
              "nl": "Nieuw vermogen"
            },
            "example": {
              "en": "3500",
              "fr": "3500",
              "de": "3500",
              "nl": "3500"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=ecu"
          }
        ]
      },
      {
        "id": "API_call_rejected",
        "title": {
          "en": "API call rejected ",
          "nl": "API-aanroep afgewezen",
          "de": "API-Aufruf abgelehnt",
          "fr": "Appel API rejeté"
        },
        "hint": {
          "en": "Check your API settings and amount of calls",
          "nl": "Controleer uw API-instellingen en het aantal oproepen",
          "de": "Überprüfen Sie Ihre API-Einstellungen und die Anzahl der Aufrufe",
          "fr": "Vérifiez vos paramètres API et le nombre d'appels"
        },
        "tokens": [
          {
            "name": "API_return_code",
            "type": "number",
            "title": {
              "en": "API Return Code",
              "nl": "API Retourcode",
              "de": "API-Rückgabecode",
              "fr": "Code de retour API"
            }
          },
          {
            "name": "API_return_message",
            "type": "string",
            "title": {
              "en": "API Return Message",
              "nl": "API Retourbericht",
              "de": "API-Rückgabemeldung",
              "fr": "Message de retour API"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=solarpanels"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "polling_start_ECU",
        "title": {
          "en": "Start ECU polling",
          "nl": "Start ECU polling",
          "de": "Umfrage ECU starten",
          "fr": "Démarrer le sondage ECU "
        },
        "hint": {
          "en": "This overrides pause end time",
          "nl": "Dit overschrijft de pauze eindtijd",
          "de": "Dies überschreibt die Pausenendzeit",
          "fr": "Ceci remplace l'heure de fin de la pause"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=ecu"
          }
        ]
      },
      {
        "id": "polling_pause_ECU",
        "title": {
          "en": "Pause ECU polling",
          "nl": "Pauzeer ECU polling",
          "de": "Umfrage ECU pausieren",
          "fr": "Suspendre le ECU sondage"
        },
        "hint": {
          "en": "This overrides pause start time",
          "nl": "Dit overschrijft de pauze starttijd",
          "de": "Dies überschreibt die Pausenstartzeit",
          "fr": "Ceci remplace l'heure de début de la pause"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=ecu"
          }
        ]
      },
      {
        "id": "polling_pause_panel",
        "title": {
          "en": "Pause solarpanel polling",
          "nl": "Pauzeer zonnepaneel polling",
          "de": "Solarpanel-Abfrage anhalten",
          "fr": "Suspendre le sondage sur les panneaux solaires"
        },
        "hint": {
          "en": "This overrides pause start time",
          "nl": "Dit overschrijft de pauze starttijd",
          "de": "Dies überschreibt die Pausenstartzeit",
          "fr": "Ceci remplace l'heure de début de la pause"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=solarpanels"
          }
        ]
      },
      {
        "id": "polling_start_panel",
        "title": {
          "en": "Start solarpanel polling",
          "nl": "Start zonnepaneel polling",
          "de": "Solarpanel-Abfrage starten",
          "fr": "Démarrer le sondage sur les panneaux solaires"
        },
        "hint": {
          "en": "This overrides pause end time",
          "nl": "Dit overschrijft de pauze eindtijd",
          "de": "Dies überschreibt die Pausenendzeit",
          "fr": "Ceci remplace l'heure de fin de la pause"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=solarpanels"
          }
        ]
      },
      {
        "id": "polling_reset",
        "title": {
          "en": "Reset polling counter",
          "nl": "Reset polling teller",
          "fr": "Réinitialiser le compteur de sondage",
          "de": "Polling-Zähler zurücksetzen"
        },
        "hint": {
          "en": "Reset the counter to zero",
          "nl": "Zet de teller weer op nul",
          "de": "Den Zähler auf Null zurücksetzen",
          "fr": "Réinitialiser le compteur à zéro"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=solarpanels"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "name": {
        "en": "ECU"
      },
      "energy": {
        "meterPowerExportedCapability": "meter_power.exported"
      },
      "class": "solarpanel",
      "capabilities": [
        "measure_power",
        "peak_power",
        "meter_power.exported",
        "measure_voltage",
        "measure_temperature",
        "inverters_online"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/ecu/assets/images/small.png",
        "large": "/drivers/ecu/assets/images/large.png",
        "xlarge": "/drivers/ecu/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "enterkeys",
          "options": {
            "logo": "APSlogo.png"
          }
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "ecu",
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "ECU data",
            "nl": "ECU gegevens",
            "de": "Steuergerätedaten",
            "fr": "Données de l'ECU"
          },
          "children": [
            {
              "id": "ECU_ID",
              "type": "text",
              "label": {
                "en": "The serial number of the ECU",
                "nl": "Het serienummer van de ECU",
                "fr": "Le numéro de série de l'ECU",
                "de": "Die Seriennummer der ECU"
              },
              "value": "123456789012",
              "hint": {
                "en": "The number is on the device.",
                "nl": "Het nummer op het apparaat ",
                "fr": "Le numéro sur l'appareil",
                "de": "Die Nummer auf dem Gerät"
              }
            },
            {
              "id": "ECU_address",
              "type": "text",
              "label": {
                "en": "The IP adress of ECU",
                "nl": "Het IP adres van de ECU",
                "fr": "L'adresse IP de l'ECU",
                "de": "Die IP-Adresse der ECU"
              },
              "value": "192.192.192.192",
              "hint": {
                "en": "The wifi IP address.",
                "nl": "Het wifi IP adres",
                "fr": "L'adresse IP du Wi-Fi",
                "de": "Die WLAN-IP-Adresse"
              }
            },
            {
              "id": "ECU_firmware",
              "type": "label",
              "label": {
                "en": "The current firmware of ECU",
                "nl": "De firmware van de ECU",
                "fr": "Le firmware actuel de l'ECU",
                "de": "Die aktuelle Firmware des Steuergerätes"
              },
              "value": "",
              "setable": false,
              "hint": {
                "en": "This cannot be changed by the user",
                "nl": "Deze kan niet gewijzigd worden door de gebruiker",
                "fr": "Cela ne peut pas être modifié par l'utilisateur",
                "de": "Dies kann vom Benutzer nicht geändert werden"
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Polling data",
            "nl": "Polling gegevens",
            "de": "Umfragedaten",
            "fr": "Données de sondage"
          },
          "children": [
            {
              "id": "pause_start",
              "type": "text",
              "label": {
                "en": "Pause start time (HH:MM)",
                "nl": "Pauze start tijd (HH:MM)",
                "de": "Pausenbeginn (HH:MM)",
                "fr": "Heure de début de la pause (HH:MM)"
              },
              "default": "23:00"
            },
            {
              "id": "pause_end",
              "type": "text",
              "label": {
                "en": "Pause end time (HH:MM)",
                "nl": "Pauze eind tijd (HH:MM)",
                "de": "Endzeit der Pause (HH:MM)",
                "fr": "Heure de fin de pause (HH:MM)"
              },
              "default": "06:00"
            },
            {
              "id": "poll_interval",
              "type": "number",
              "label": {
                "en": "Polling interval",
                "nl": "Polling interval",
                "de": "Abfrageintervall",
                "fr": "Intervalle d'interrogation"
              },
              "default": 5,
              "units": {
                "en": "minutes",
                "nl": "minuten",
                "de": "Minuten",
                "fr": "minutes"
              }
            },
            {
              "id": "pause_by_flowcard",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Perform pauses through flowcards",
                "nl": "Pauze uitvoeren door flowcards",
                "de": "Pausen durch Flowcards durchführen",
                "fr": "Effectuer des pauses à travers des flowcards"
              }
            }
          ]
        }
      ]
    },
    {
      "name": {
        "en": "Solarpanels"
      },
      "capabilities": [
        "total_energy",
        "year_energy",
        "month_energy",
        "meter_power",
        "measure_polling"
      ],
      "class": "solarpanel",
      "platforms": [
        "local"
      ],
      "connectivity": [
        "cloud"
      ],
      "images": {
        "small": "/drivers/solarpanels/assets/images/small.jpg",
        "large": "/drivers/solarpanels/assets/images/large.jpg",
        "xlarge": "/drivers/solarpanels/assets/images/xlarge.jpg"
      },
      "energy_exclude": true,
      "pair": [
        {
          "id": "enterkeys"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "solarpanels",
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Polling data",
            "nl": "Polling gegevens",
            "de": "Umfragedaten",
            "fr": "Données de sondage"
          },
          "children": [
            {
              "id": "pause_start",
              "type": "text",
              "label": {
                "en": "Pause start time (HH:MM)",
                "nl": "Pauze start tijd (HH:MM)",
                "de": "Pausenbeginn (HH:MM)",
                "fr": "Heure de début de la pause (HH:MM)"
              },
              "default": "23:00"
            },
            {
              "id": "pause_end",
              "type": "text",
              "label": {
                "en": "Pause end time (HH:MM)",
                "nl": "Pauze eind tijd (HH:MM)",
                "de": "Endzeit der Pause (HH:MM)",
                "fr": "Heure de fin de pause (HH:MM)"
              },
              "default": "06:00"
            },
            {
              "id": "poll_interval",
              "type": "number",
              "label": {
                "en": "Polling interval",
                "nl": "Polling interval",
                "de": "Abfrageintervall",
                "fr": "Intervalle d'interrogation"
              },
              "default": 15,
              "units": {
                "en": "minutes",
                "nl": "minuten",
                "de": "Minuten",
                "fr": "minutes"
              }
            },
            {
              "id": "pause_by_flowcard",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Perform pauses through flowcards",
                "nl": "Pauze uitvoeren door flowcards",
                "de": "Pausen durch Flowcards durchführen",
                "fr": "Effectuer des pauses à travers des flowcards"
              }
            }
          ]
        }
      ]
    }
  ],
  "capabilities": {
    "inverters_online": {
      "type": "string",
      "title": {
        "en": "Inverters online",
        "nl": "Inverters online",
        "fr": "Onduleurs en ligne",
        "de": "Wechselrichter online"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": ""
      },
      "insights": false,
      "icon": "/assets/icons/inverters_online.svg"
    },
    "measure_polling": {
      "type": "number",
      "title": {
        "en": "Polling this month",
        "nl": "Polling deze maand",
        "fr": "Sondage ce mois-ci",
        "de": "Umfrage in diesem Monat "
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": ""
      },
      "insights": false,
      "icon": "/assets/icons/counter.svg"
    },
    "measure_power": {
      "type": "number",
      "title": {
        "en": "Power generated",
        "nl": "Gegenereerd vermogen",
        "de": "Erzeugte Leistung",
        "fr": "Énergie produite"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": "W"
      },
      "insights": false,
      "icon": "/assets/icons/measure_power.svg"
    },
    "meter_power": {
      "type": "number",
      "title": {
        "en": "Todays energy",
        "nl": "Energie vandaag",
        "fr": "Performance aujourd'hui",
        "de": "Leistung heute"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": "kWh"
      },
      "insights": true,
      "icon": "/assets/icons/measure_power.svg"
    },
    "month_energy": {
      "type": "number",
      "title": {
        "en": "Energy this month",
        "nl": "Energie deze maand",
        "fr": "Puissance ce mois-ci",
        "de": "Leistung diesen Monat"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": "kWh"
      },
      "insights": true,
      "icon": "/assets/icons/measure_power.svg"
    },
    "peak_power": {
      "type": "number",
      "title": {
        "en": "Peak power",
        "nl": "Piekvermogen",
        "fr": "Puissance de crête",
        "de": "Spitzenleistung"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": "W"
      },
      "insights": false,
      "icon": "/assets/icons/peak_power.svg"
    },
    "total_energy": {
      "type": "number",
      "title": {
        "en": "Total energy",
        "nl": "Totaal vermogen",
        "fr": "Puissance totale",
        "de": "Gesamtleistung"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": "kWh"
      },
      "insights": true,
      "icon": "/assets/icons/measure_power.svg"
    },
    "year_energy": {
      "type": "number",
      "title": {
        "en": "This years energy",
        "nl": "Vermogen dit jaar",
        "fr": "Puissance de cette année",
        "de": "Leistung diesen Jahr"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": false,
      "units": {
        "en": "kWh"
      },
      "insights": true,
      "icon": "/assets/icons/measure_power.svg"
    }
  }
}